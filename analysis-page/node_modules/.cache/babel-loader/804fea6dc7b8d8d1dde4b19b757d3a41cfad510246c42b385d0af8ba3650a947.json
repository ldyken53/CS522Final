{"ast":null,"code":"var _jsxFileName = \"/Users/kokofan/Documents/project/CS529HW1/src/WhiteHatStats.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useMemo } from 'react';\nimport useSVGCanvas from './useSVGCanvas.js';\nimport * as d3 from 'd3';\n\n//change the code below to modify the bottom plot view\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function WhiteHatStats(props) {\n  _s();\n  //this is a generic component for plotting a d3 plot\n  const d3Container = useRef(null);\n  //this automatically constructs an svg canvas the size of the parent container (height and width)\n  //tTip automatically attaches a div of the class 'tooltip' if it doesn't already exist\n  //this will automatically resize when the window changes so passing svg to a useeffect will re-trigger\n  const [svg, height, width, tTip] = useSVGCanvas(d3Container);\n  // console.log(svg, height, width, tTip);\n\n  const margin = 50;\n  // const radius = 10;\n\n  function cleanString(string) {\n    return string.replace(' ', '_').replace(' ', '_');\n  }\n\n  //TODO: modify or replace the code below to draw a more truthful or insightful representation of the dataset. This other representation could be a histogram, a stacked bar chart, etc.\n  //this loop updates when the props.data changes or the window resizes\n  //we can edit it to also use props.brushedState if you want to use linking\n  const chartSelection = useMemo(() => {\n    //wait until the data loads\n    if (svg === undefined | props.data === undefined) {\n      return;\n    }\n\n    //aggregate gun deaths by state\n    const data = props.data.states;\n\n    // Get min and max gun deaths by state \n\n    //get data for each state\n    const plotData = [];\n    for (let state of data) {\n      let entry = {\n        'ab': state.abreviation,\n        'name': state.state,\n        'population': state.population,\n        'count': state.count,\n        'maleCount': state.male_count,\n        'femaleCount': state.count - state.male_count,\n        'ratio': state.count / state.population * 100000,\n        'male': state.male_count / state.population * 100000,\n        'female': (state.count - state.male_count) / state.population * 100000\n      };\n      plotData.push(entry);\n    }\n    const ratiomap = d => d.ratio;\n    const stateRatios = Object.values(plotData).map(ratiomap);\n    const [ratioMin, ratioMax] = d3.extent(stateRatios);\n\n    // get abreviations (for x axis)\n    var groups = d3.map(data, function (d) {\n      return d.abreviation;\n    });\n\n    // set x axis\n    var xScale = d3.scaleBand().domain(groups).range([0, width - margin]).padding([0.3]);\n\n    // position of x axis\n    svg.append(\"g\").attr(\"transform\", \"translate(\" + margin + \", \" + (height - margin) + \")\").call(d3.axisBottom(xScale).tickSizeOuter(0));\n\n    // set y axis\n    let yScale = d3.scaleLinear().domain([ratioMax, 0]).range([margin, height - margin]);\n\n    // position of y axis\n    svg.append(\"g\").attr(\"transform\", \"translate(\" + margin + \", \" + 0 + \")\").call(d3.axisLeft(yScale));\n    var barkeys = ['male', 'female'];\n\n    // color map\n    var color = d3.scaleOrdinal().domain(barkeys).range(['#08519c', '#a3baff']);\n\n    // create stack data\n    var stackedData = d3.stack().keys(barkeys)(plotData);\n\n    // draw stack chart\n    let chartGroup = svg.append(\"g\").attr('class', 'stack').attr(\"transform\", \"translate(\" + margin + \", \" + 0 + \")\");\n    chartGroup.selectAll(\"g\").data(stackedData).enter().append(\"g\").attr(\"fill\", function (d) {\n      return color(d.key);\n    }).selectAll(\"rect\").data(function (d) {\n      return d;\n    }).enter().append(\"rect\").attr('class', 'stack-rect').attr(\"x\", function (d) {\n      return xScale(d.data.ab);\n    }).attr(\"y\", function (d) {\n      return yScale(d[1]);\n    }).attr(\"height\", function (d) {\n      return yScale(d[0]) - yScale(d[1]);\n    }).attr(\"width\", xScale.bandwidth()).on('mouseover', (e, d) => {\n      let state = cleanString(d.data.name);\n      //this updates the brushed state\n      console.log(state, props.brushedState);\n      if (props.brushedState !== state) {\n        props.setBrushedState(state);\n      }\n      var ratios, deaths;\n      if (d[0] == 0) {\n        ratios = 'Male-Ratio: ' + d.data.male;\n        deaths = 'Male-Deaths: ' + d.data.maleCount;\n      } else {\n        ratios = 'Female-Ratio: ' + d.data.female;\n        deaths = 'Female-Deaths: ' + d.data.femaleCount;\n      }\n      let string = d.data.name + '</br>' + '</br>' + ratios + '</br>' + deaths + '</br>' + 'Total-Deatchs: ' + d.data.count + '</br>' + 'Population: ' + d.data.population;\n      props.ToolTip.moveTTipEvent(tTip, e);\n      tTip.html(string);\n    }).on('mousemove', e => {\n      props.ToolTip.moveTTipEvent(tTip, e);\n    }).on('mouseout', (e, d) => {\n      props.ToolTip.hideTTip(tTip);\n    });\n\n    // legends group\n    var legend = svg.append('g').attr('class', 'legend').attr('transform', 'translate(' + (width - 3 * margin) + \", \" + margin + ')');\n\n    // draw legends\n    legend.selectAll('rect').data(barkeys).enter().append('rect').attr('x', 0).attr('y', function (d, i) {\n      return i * 18;\n    }).attr('width', 12).attr('height', 12).attr('fill', function (d, i) {\n      return color(i);\n    });\n\n    // names of legends\n    legend.selectAll('text').data(barkeys).enter().append('text').text(function (d) {\n      return d[0].toUpperCase() + d.slice(1) + \"-Deaths\";\n    }).attr('x', 18).attr('y', function (d, i) {\n      return i * 18;\n    }).attr('text-anchor', 'start').attr('alignment-baseline', 'hanging');\n\n    // lable of x axis\n    svg.append(\"text\").attr(\"class\", \"x-label\").attr(\"x\", width / 2).attr(\"y\", height - margin / 4).attr(\"text-anchor\", \"middle\").text(\"State (abreviation)\");\n\n    // lable of y axis\n    svg.append(\"text\").attr(\"class\", \"y-label\").attr(\"text-anchor\", \"middle\").attr(\"x\", -height / 2).attr(\"y\", 0).attr(\"dy\", \".75em\").attr(\"transform\", \"rotate(-90)\").text(\"Gun deaths per State\");\n\n    // svg.selectAll('.rect').remove();\n    // svg.selectAll('.rect').data(data)\n    //    .enter().append('rect')\n    //    .attr('x', (d,i) => xScale(i))\n    //    .attr('width', width/data.length)\n    //    .attr('height', d => {\n    //         // return y(d[0])-y(d[1])\n    //     })\n\n    // .attr('y', d => y(d[1]))\n    // .attr('fill', d => d.key == 'Births' ? 'lightBlue' : 'orange')\n    // .attr('opacity', .5)\n    // .attr('stroke', 'red')\n    // .attr('stroke-width', 1)\n    //get data for each state\n    //     const plotData = [];\n    //     for(let state of data){\n    //         const dd = drawingDifficulty[state.abreviation];\n    //         let entry = {\n    //             'count': state.count,\n    //             'name': state.state,\n    //             'easeOfDrawing': dd === undefined? 5: dd,\n    //             'genderRatio': state.male_count/state.count,\n    //         }\n    //         plotData.push(entry)\n    //     }\n\n    //     //get transforms for each value into x and y coordinates\n    //     let xScale = d3.scaleLinear()\n    //         .domain(d3.extent(plotData,d=>d.easeOfDrawing))\n    //         .range([margin+radius,width-margin-radius]);\n    //     let yScale = d3.scaleLinear()\n    //         .domain(d3.extent(plotData,d=>d.count))\n    //         .range([height-margin-radius,margin+radius]);\n\n    //     //draw a line showing the mean values across the curve\n    //     //this probably isn't actually regression\n    //     const regressionLine = [];\n    //     for(let i = 0; i <= 10; i+= 1){\n    //         let pvals = plotData.filter(d => Math.abs(d.easeOfDrawing - i) <= .5);\n    //         let meanY = 0;\n    //         if(pvals.length > 0){\n    //             for(let entry of pvals){\n    //                 meanY += entry.count/pvals.length\n    //             }\n    //         }\n    //         let point = [xScale(i),yScale(meanY)]\n    //         regressionLine.push(point)\n    //     }\n\n    //     //scale color by gender ratio for no reason\n    //     let colorScale = d3.scaleDiverging()\n    //         .domain([0,.5,1])\n    //         .range(['magenta','white','navy']);\n\n    //     //draw the circles for each state\n    //     svg.selectAll('.dot').remove();\n    //     svg.selectAll('.dot').data(plotData)\n    //         .enter().append('circle')\n    //         .attr('cy',d=> yScale(d.count))\n    //         .attr('cx',d=>xScale(d.easeOfDrawing))\n    //         .attr('fill',d=> colorScale(d.genderRatio))\n    //         .attr('r',10)\n    //         .on('mouseover',(e,d)=>{\n    //             let string = d.name + '</br>'\n    //                 + 'Gun Deaths: ' + d.count + '</br>'\n    //                 + 'Difficulty Drawing: ' + d.easeOfDrawing;\n    //             props.ToolTip.moveTTipEvent(tTip,e)\n    //             tTip.html(string)\n    //         }).on('mousemove',(e)=>{\n    //             props.ToolTip.moveTTipEvent(tTip,e);\n    //         }).on('mouseout',(e,d)=>{\n    //             props.ToolTip.hideTTip(tTip);\n    //         });\n\n    //     //draw the line\n    //     svg.selectAll('.regressionLine').remove();\n    //     svg.append('path').attr('class','regressionLine')\n    //         .attr('d',d3.line().curve(d3.curveBasis)(regressionLine))\n    //         .attr('stroke-width',5)\n    //         .attr('stroke','black')\n    //         .attr('fill','none');\n\n    // change the title\n    const labelSize = margin / 2;\n    svg.append('text').attr('x', width / 2).attr('y', labelSize).attr('text-anchor', 'middle').attr('font-size', labelSize).attr('font-weight', 'bold').text('Gun Deaths by State');\n\n    //     //change the disclaimer here\n    //     svg.append('text')\n    //         .attr('x',width-20)\n    //         .attr('y',height/3)\n    //         .attr('text-anchor','end')\n    //         .attr('font-size',10)\n    //         .text(\"I'm just asking questions\");\n\n    //     //draw basic axes using the x and y scales\n    //     svg.selectAll('g').remove()\n    //     svg.append('g')\n    //         .attr('transform',`translate(0,${height-margin+1})`)\n    //         .call(d3.axisBottom(xScale))\n\n    //     svg.append('g')\n    //         .attr('transform',`translate(${margin-2},0)`)\n    //         .call(d3.axisLeft(yScale))\n\n    return chartGroup;\n  }, [props.data, svg]);\n\n  // useMemo(()=>{\n  //     if(chartSelection !== undefined){\n  //         const isBrushed = props.brushedState !== undefined;\n  //         chartSelection.selectAll('.rect')\n  //                       .attr('opacity',isBrushed? 0.2:0.4);\n  //                       // .attr('strokeWidth',isBrushed? 1:2);\n  //         if(isBrushed){\n  //             console.log(\"isBrushed \", isBrushed);\n  //             chartSelection.select('#'+props.brushedState)\n  //                 .attr('opacity',1)\n  //                 .attr('strokeWidth',3);\n  //         }\n  //     }\n  // },[chartSelection,props.brushedState]);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d3-component\",\n    style: {\n      'height': '99%',\n      'width': '99%'\n    },\n    ref: d3Container\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 319,\n    columnNumber: 9\n  }, this);\n}\n//END of TODO #1.\n\n// const drawingDifficulty = {\n//     'IL': 9,\n//     'AL': 2,\n//     'AK': 1,\n//     'AR': 3,\n//     'CA': 9.51,\n//     'CO': 0,\n//     'DE': 3.1,\n//     'DC': 1.3,\n//     'FL': 8.9,\n//     'GA': 3.9,\n//     'HI': 4.5,\n//     'ID': 4,\n//     'IN': 4.3,\n//     'IA': 4.1,\n//     'KS': 1.6,\n//     'KY': 7,\n//     'LA': 6.5,\n//     'MN': 2.1,\n//     'MO': 5.5,\n//     'ME': 7.44,\n//     'MD': 10,\n//     'MA': 6.8,\n//     'MI': 9.7,\n//     'MN': 5.1,\n//     'MS': 3.8,\n//     'MT': 1.4,\n//     'NE': 1.9,\n//     'NV': .5,\n//     'NH': 3.7,\n//     'NJ': 9.1,\n//     'NM': .2,\n//     'NY': 8.7,\n//     'NC': 8.5,\n//     'ND': 2.3,\n//     'OH': 5.8,\n//     'OK': 6.05,\n//     'OR': 4.7,\n//     'PA': 4.01,\n//     'RI': 8.4,\n//     'SC': 7.1,\n//     'SD': .9,\n//     'TN': 3.333333,\n//     'TX': 8.1,\n//     'UT': 2.8,\n//     'VT': 2.6,\n//     'VA': 8.2,\n//     'WA': 9.2,\n//     'WV': 7.9,\n//     'WY': 0,\n// }\n_s(WhiteHatStats, \"ZIF2Y6G+4lDrENfXS4yyPmH62/0=\", false, function () {\n  return [useSVGCanvas];\n});\n_c = WhiteHatStats;\nvar _c;\n$RefreshReg$(_c, \"WhiteHatStats\");","map":{"version":3,"names":["React","useEffect","useRef","useMemo","useSVGCanvas","d3","jsxDEV","_jsxDEV","WhiteHatStats","props","_s","d3Container","svg","height","width","tTip","margin","cleanString","string","replace","chartSelection","undefined","data","states","plotData","state","entry","abreviation","population","count","male_count","push","ratiomap","d","ratio","stateRatios","Object","values","map","ratioMin","ratioMax","extent","groups","xScale","scaleBand","domain","range","padding","append","attr","call","axisBottom","tickSizeOuter","yScale","scaleLinear","axisLeft","barkeys","color","scaleOrdinal","stackedData","stack","keys","chartGroup","selectAll","enter","key","ab","bandwidth","on","e","name","console","log","brushedState","setBrushedState","ratios","deaths","male","maleCount","female","femaleCount","ToolTip","moveTTipEvent","html","hideTTip","legend","i","text","toUpperCase","slice","labelSize","className","style","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/kokofan/Documents/project/CS529HW1/src/WhiteHatStats.js"],"sourcesContent":["import React, {useEffect, useRef,useMemo} from 'react';\nimport useSVGCanvas from './useSVGCanvas.js';\nimport * as d3 from 'd3';\n\n//change the code below to modify the bottom plot view\nexport default function WhiteHatStats(props){\n    //this is a generic component for plotting a d3 plot\n    const d3Container = useRef(null);\n    //this automatically constructs an svg canvas the size of the parent container (height and width)\n    //tTip automatically attaches a div of the class 'tooltip' if it doesn't already exist\n    //this will automatically resize when the window changes so passing svg to a useeffect will re-trigger\n    const [svg, height, width, tTip] = useSVGCanvas(d3Container);\n    // console.log(svg, height, width, tTip);\n\n    const margin = 50;\n    // const radius = 10;\n\n    function cleanString(string){\n        return string.replace(' ','_').replace(' ','_');\n    }\n\n\n    //TODO: modify or replace the code below to draw a more truthful or insightful representation of the dataset. This other representation could be a histogram, a stacked bar chart, etc.\n    //this loop updates when the props.data changes or the window resizes\n    //we can edit it to also use props.brushedState if you want to use linking\n    const chartSelection = useMemo(()=>{\n        //wait until the data loads\n        if(svg === undefined | props.data === undefined){ return }\n\n        //aggregate gun deaths by state\n        const data = props.data.states;\n\n        // Get min and max gun deaths by state \n\n        //get data for each state\n        const plotData = [];\n        for(let state of data){\n            let entry = {\n                'ab': state.abreviation,\n                'name': state.state,\n                'population': state.population,\n                'count': state.count,\n                'maleCount': state.male_count,\n                'femaleCount': state.count - state.male_count,\n                'ratio': state.count / state.population * 100000,\n                'male': state.male_count / state.population * 100000,\n                'female': (state.count - state.male_count) / state.population * 100000,\n            }\n            plotData.push(entry)\n        }\n\n        const ratiomap = d => d.ratio;\n        const stateRatios = Object.values(plotData).map(ratiomap);\n        const [ratioMin,ratioMax] = d3.extent(stateRatios);\n\n        // get abreviations (for x axis)\n        var groups = d3.map(data, function(d){return(d.abreviation)})\n\n        // set x axis\n        var xScale = d3.scaleBand()\n                  .domain(groups)\n                  .range([0, width - margin])\n                  .padding([0.3])\n        \n        // position of x axis\n        svg.append(\"g\")\n           .attr(\"transform\", \"translate(\" + margin + \", \" + (height - margin) + \")\")\n           .call(d3.axisBottom(xScale).tickSizeOuter(0));\n\n        // set y axis\n        let yScale = d3.scaleLinear()\n                       .domain([ratioMax, 0])\n                       .range([margin, height - margin]);\n        \n        // position of y axis\n        svg.append(\"g\")\n           .attr(\"transform\", \"translate(\" + margin + \", \" + 0 + \")\")\n           .call(d3.axisLeft(yScale));\n\n        var barkeys = ['male', 'female'];\n\n        // color map\n        var color = d3.scaleOrdinal()\n                      .domain(barkeys)\n                      .range(['#08519c','#a3baff'])\n\n        // create stack data\n        var stackedData = d3.stack()\n                            .keys(barkeys)\n                            (plotData)\n\n        // draw stack chart\n        let chartGroup = svg.append(\"g\")\n                            .attr('class','stack')\n                            .attr(\"transform\", \"translate(\" + margin + \", \" + 0 + \")\");\n        \n        chartGroup.selectAll(\"g\")\n           .data(stackedData)\n           .enter().append(\"g\")\n           .attr(\"fill\", function(d) { return color(d.key); })\n           .selectAll(\"rect\")\n           .data(function(d) { return d; })\n           .enter().append(\"rect\")\n           .attr('class','stack-rect')\n           .attr(\"x\", function(d) { return xScale(d.data.ab); })\n           .attr(\"y\", function(d) { return yScale(d[1]); })\n           .attr(\"height\", function(d) { return yScale(d[0]) - yScale(d[1]); })\n           .attr(\"width\", xScale.bandwidth())\n           .on('mouseover',(e,d)=>{\n                let state = cleanString(d.data.name);\n                //this updates the brushed state\n                console.log(state, props.brushedState);\n                if(props.brushedState !== state){\n                    props.setBrushedState(state);\n                }\n                var ratios, deaths;\n                if (d[0] == 0) { \n                    ratios = 'Male-Ratio: ' + d.data.male; \n                    deaths = 'Male-Deaths: ' + d.data.maleCount;\n                }\n                else { \n                    ratios = 'Female-Ratio: ' + d.data.female;\n                    deaths = 'Female-Deaths: ' + d.data.femaleCount;\n                }\n                let string = d.data.name + '</br>'\n                    + '</br>'\n                    + ratios + '</br>'\n                    + deaths + '</br>'\n                    + 'Total-Deatchs: ' + d.data.count + '</br>'\n                    + 'Population: ' + d.data.population;\n                props.ToolTip.moveTTipEvent(tTip,e)\n                tTip.html(string)\n            }).on('mousemove',(e)=>{\n                props.ToolTip.moveTTipEvent(tTip,e);\n            }).on('mouseout',(e,d)=>{\n                props.ToolTip.hideTTip(tTip);\n            });\n\n        // legends group\n        var legend = svg.append('g')\n            .attr('class', 'legend')\n            .attr('transform', 'translate(' + (width - 3*margin) + \", \" + margin + ')' );\n\n        // draw legends\n        legend.selectAll('rect')\n              .data(barkeys)\n              .enter()\n              .append('rect')\n              .attr('x', 0)\n              .attr('y', function(d, i){ return i * 18; })\n              .attr('width', 12)\n              .attr('height', 12)\n              .attr('fill', function(d, i){\n                  return color(i);\n              });\n\n        // names of legends\n        legend.selectAll('text')\n              .data(barkeys)\n              .enter()\n              .append('text')\n              .text(function(d){ return d[0].toUpperCase() + d.slice(1) + \"-Deaths\"; })\n              .attr('x', 18)\n              .attr('y', function(d, i){ return i * 18;})\n              .attr('text-anchor', 'start')\n              .attr('alignment-baseline', 'hanging');\n\n        // lable of x axis\n        svg.append(\"text\")\n           .attr(\"class\", \"x-label\")\n           .attr(\"x\", width/2)\n           .attr(\"y\", height - margin/4)\n           .attr(\"text-anchor\", \"middle\")\n           .text(\"State (abreviation)\")\n\n        // lable of y axis\n        svg.append(\"text\")\n           .attr(\"class\", \"y-label\")\n           .attr(\"text-anchor\", \"middle\")\n           .attr(\"x\", -height/2)\n           .attr(\"y\", 0)\n           .attr(\"dy\", \".75em\")\n           .attr(\"transform\", \"rotate(-90)\")\n           .text(\"Gun deaths per State\");\n\n\n        // svg.selectAll('.rect').remove();\n        // svg.selectAll('.rect').data(data)\n        //    .enter().append('rect')\n        //    .attr('x', (d,i) => xScale(i))\n        //    .attr('width', width/data.length)\n        //    .attr('height', d => {\n        //         // return y(d[0])-y(d[1])\n        //     })\n\n           // .attr('y', d => y(d[1]))\n           // .attr('fill', d => d.key == 'Births' ? 'lightBlue' : 'orange')\n           // .attr('opacity', .5)\n           // .attr('stroke', 'red')\n           // .attr('stroke-width', 1)\n        //get data for each state\n    //     const plotData = [];\n    //     for(let state of data){\n    //         const dd = drawingDifficulty[state.abreviation];\n    //         let entry = {\n    //             'count': state.count,\n    //             'name': state.state,\n    //             'easeOfDrawing': dd === undefined? 5: dd,\n    //             'genderRatio': state.male_count/state.count,\n    //         }\n    //         plotData.push(entry)\n    //     }\n\n    //     //get transforms for each value into x and y coordinates\n    //     let xScale = d3.scaleLinear()\n    //         .domain(d3.extent(plotData,d=>d.easeOfDrawing))\n    //         .range([margin+radius,width-margin-radius]);\n    //     let yScale = d3.scaleLinear()\n    //         .domain(d3.extent(plotData,d=>d.count))\n    //         .range([height-margin-radius,margin+radius]);\n\n\n    //     //draw a line showing the mean values across the curve\n    //     //this probably isn't actually regression\n    //     const regressionLine = [];\n    //     for(let i = 0; i <= 10; i+= 1){\n    //         let pvals = plotData.filter(d => Math.abs(d.easeOfDrawing - i) <= .5);\n    //         let meanY = 0;\n    //         if(pvals.length > 0){\n    //             for(let entry of pvals){\n    //                 meanY += entry.count/pvals.length\n    //             }\n    //         }\n    //         let point = [xScale(i),yScale(meanY)]\n    //         regressionLine.push(point)\n    //     }\n        \n    //     //scale color by gender ratio for no reason\n    //     let colorScale = d3.scaleDiverging()\n    //         .domain([0,.5,1])\n    //         .range(['magenta','white','navy']);\n\n    //     //draw the circles for each state\n    //     svg.selectAll('.dot').remove();\n    //     svg.selectAll('.dot').data(plotData)\n    //         .enter().append('circle')\n    //         .attr('cy',d=> yScale(d.count))\n    //         .attr('cx',d=>xScale(d.easeOfDrawing))\n    //         .attr('fill',d=> colorScale(d.genderRatio))\n    //         .attr('r',10)\n    //         .on('mouseover',(e,d)=>{\n    //             let string = d.name + '</br>'\n    //                 + 'Gun Deaths: ' + d.count + '</br>'\n    //                 + 'Difficulty Drawing: ' + d.easeOfDrawing;\n    //             props.ToolTip.moveTTipEvent(tTip,e)\n    //             tTip.html(string)\n    //         }).on('mousemove',(e)=>{\n    //             props.ToolTip.moveTTipEvent(tTip,e);\n    //         }).on('mouseout',(e,d)=>{\n    //             props.ToolTip.hideTTip(tTip);\n    //         });\n           \n    //     //draw the line\n    //     svg.selectAll('.regressionLine').remove();\n    //     svg.append('path').attr('class','regressionLine')\n    //         .attr('d',d3.line().curve(d3.curveBasis)(regressionLine))\n    //         .attr('stroke-width',5)\n    //         .attr('stroke','black')\n    //         .attr('fill','none');\n\n        // change the title\n        const labelSize = margin/2;\n        svg.append('text')\n            .attr('x',width/2)\n            .attr('y',labelSize)\n            .attr('text-anchor','middle')\n            .attr('font-size',labelSize)\n            .attr('font-weight','bold')\n            .text('Gun Deaths by State');\n\n    //     //change the disclaimer here\n    //     svg.append('text')\n    //         .attr('x',width-20)\n    //         .attr('y',height/3)\n    //         .attr('text-anchor','end')\n    //         .attr('font-size',10)\n    //         .text(\"I'm just asking questions\");\n\n    //     //draw basic axes using the x and y scales\n    //     svg.selectAll('g').remove()\n    //     svg.append('g')\n    //         .attr('transform',`translate(0,${height-margin+1})`)\n    //         .call(d3.axisBottom(xScale))\n\n    //     svg.append('g')\n    //         .attr('transform',`translate(${margin-2},0)`)\n    //         .call(d3.axisLeft(yScale))\n\n        return chartGroup;\n        \n    },[props.data,svg]);\n\n    // useMemo(()=>{\n    //     if(chartSelection !== undefined){\n    //         const isBrushed = props.brushedState !== undefined;\n    //         chartSelection.selectAll('.rect')\n    //                       .attr('opacity',isBrushed? 0.2:0.4);\n    //                       // .attr('strokeWidth',isBrushed? 1:2);\n    //         if(isBrushed){\n    //             console.log(\"isBrushed \", isBrushed);\n    //             chartSelection.select('#'+props.brushedState)\n    //                 .attr('opacity',1)\n    //                 .attr('strokeWidth',3);\n    //         }\n    //     }\n    // },[chartSelection,props.brushedState]);\n\n    return (\n        <div\n            className={\"d3-component\"}\n            style={{'height':'99%','width':'99%'}}\n            ref={d3Container}\n        ></div>\n    );\n}\n//END of TODO #1.\n\n \n// const drawingDifficulty = {\n//     'IL': 9,\n//     'AL': 2,\n//     'AK': 1,\n//     'AR': 3,\n//     'CA': 9.51,\n//     'CO': 0,\n//     'DE': 3.1,\n//     'DC': 1.3,\n//     'FL': 8.9,\n//     'GA': 3.9,\n//     'HI': 4.5,\n//     'ID': 4,\n//     'IN': 4.3,\n//     'IA': 4.1,\n//     'KS': 1.6,\n//     'KY': 7,\n//     'LA': 6.5,\n//     'MN': 2.1,\n//     'MO': 5.5,\n//     'ME': 7.44,\n//     'MD': 10,\n//     'MA': 6.8,\n//     'MI': 9.7,\n//     'MN': 5.1,\n//     'MS': 3.8,\n//     'MT': 1.4,\n//     'NE': 1.9,\n//     'NV': .5,\n//     'NH': 3.7,\n//     'NJ': 9.1,\n//     'NM': .2,\n//     'NY': 8.7,\n//     'NC': 8.5,\n//     'ND': 2.3,\n//     'OH': 5.8,\n//     'OK': 6.05,\n//     'OR': 4.7,\n//     'PA': 4.01,\n//     'RI': 8.4,\n//     'SC': 7.1,\n//     'SD': .9,\n//     'TN': 3.333333,\n//     'TX': 8.1,\n//     'UT': 2.8,\n//     'VT': 2.6,\n//     'VA': 8.2,\n//     'WA': 9.2,\n//     'WV': 7.9,\n//     'WY': 0,\n// }\n"],"mappings":"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,EAACyC,SAAS,CAAC,CAC3BzC,IAAI,CAAC,aAAa,EAAC,MAAM,CAAC,CAC1BsC,IAAI,CAAC,qBAAqB,CAAC;;IAEpC;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;;IAEI,OAAOzB,UAAU;EAErB,CAAC,EAAC,CAACrD,KAAK,CAACa,IAAI,EAACV,GAAG,CAAC,CAAC;;EAEnB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,oBACIL,OAAA;IACIoF,SAAS,EAAE,cAAe;IAC1BC,KAAK,EAAE;MAAC,QAAQ,EAAC,KAAK;MAAC,OAAO,EAAC;IAAK,CAAE;IACtCC,GAAG,EAAElF;EAAY;IAAAmF,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACf,CAAC;AAEf;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAAvF,EAAA,CArXwBF,aAAa;EAAA,QAMEJ,YAAY;AAAA;AAAA8F,EAAA,GAN3B1F,aAAa;AAAA,IAAA0F,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}