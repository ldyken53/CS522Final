{"ast":null,"code":"var _jsxFileName = \"/Users/kokofan/Documents/project/CS522_analysis/src/lineChart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useMemo } from 'react';\nimport useSVGCanvas from './useSVGCanvas.js';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PlotLineChart(props) {\n  _s();\n  // //this is a generic component for plotting a d3 plot\n  const d3Container = useRef(null);\n  const [svg, height, width, tTip] = useSVGCanvas(d3Container);\n  // console.log(svg, height, width, tTip);\n\n  const chartSelection = useMemo(() => {\n    if (svg === undefined | props.data === undefined) {\n      return;\n    }\n    var categories = ['Adult', 'Violence', 'Hate_Speech', 'Discrimination', 'Online_Predators'];\n    const dates = props.data.map(d => d.date);\n    const counts = {};\n    for (const d of dates) {\n      counts[d] = counts[d] ? counts[d] + 1 : 1;\n    }\n    console.log(counts.length);\n\n    // xScale = d3.scalePoint()\n    //     .domain([0, 100])\n    //     .range([0, (container_width - padding*4)]);\n\n    // var cag_counts = new Array(categories.length).fill(0);\n    // for(let d of props.data){\n    //     var index = categories.indexOf(d.category);\n    //     cag_counts[index] += 1;\n    // }\n\n    // var pieData = [];\n    // var tCount = 0;\n    // for (let i =0; i < categories.length; i++) {\n    //     let entry = {\n    //         'category': categories[i],\n    //         'count': cag_counts[i],\n    //     }\n    //     tCount += cag_counts[i];\n    //     pieData.push(entry);\n    // }\n\n    // console.log(pieData);\n\n    // const radius = width*0.2;\n\n    // var ordScale = d3.scaleOrdinal()\n    //                 .domain(pieData)\n    //                 .range(['#ffd384','#94ebcd','#fbaccc','#d3e0ea','#fa7f72']);\n\n    // let pieChart = svg.append(\"g\")\n    //                     .attr('class','stack')\n    //                     .attr(\"transform\", \"translate(\" + (width/3 + radius) + \", \" + (radius + 20)  + \")\");\n\n    // var pie = d3.pie().value(function(d) { \n    //         return d.count; \n    //     });\n\n    // var arc = pieChart.selectAll(\"arc\")\n    //            .data(pie(pieData))\n    //            .enter();\n\n    // var path = d3.arc()\n    //              .outerRadius(radius)\n    //              .innerRadius(0);\n\n    // arc.append(\"path\")\n    //    .attr(\"d\", path)\n    //    .attr(\"fill\", function(d) { return ordScale(d.data.category); });\n\n    // var label = d3.arc()\n    //               .outerRadius(radius)\n    //               .innerRadius(0);\n\n    // var label2 = d3.arc()\n    //               .outerRadius(radius*2.1)\n    //               .innerRadius(0);\n\n    // arc.append(\"text\")\n    //    .attr(\"transform\", function(d) { \n    //         // console.log(d);\n    //         var rotation = (d.startAngle/2 + d.endAngle/2) * 180/Math.PI;\n    //         return \"translate(\" + (label2.centroid(d)) + \") rotate(\" + rotation + \")\"; \n    //     })\n    //    .text(function(d) { return d.data.category; })\n    //    .style(\"font-family\", \"arial\")\n    //    .style(\"font-size\", 12)\n    //    .style(\"text-anchor\", \"middle\");\n\n    // arc.append(\"text\")\n    //    .attr(\"transform\", function(d) { \n    //         var rotation = (d.startAngle/2 + d.endAngle/2) * 180/Math.PI;\n    //         return \"translate(\" + (label.centroid(d)) + \") rotate(\" + rotation + \")\"; \n    //     })\n    //    .text(function(d) { return (d.data.count/tCount * 100).toFixed(0) + '%'; })\n    //    .style(\"font-family\", \"arial\")\n    //    .style(\"font-size\", 12)\n    //    .style(\"text-anchor\", \"left\");\n  });\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d3-component\",\n    style: {\n      'height': '99%',\n      'width': '99%'\n    },\n    ref: d3Container\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n}\n_s(PlotLineChart, \"ZIF2Y6G+4lDrENfXS4yyPmH62/0=\", false, function () {\n  return [useSVGCanvas];\n});\n_c = PlotLineChart;\nvar _c;\n$RefreshReg$(_c, \"PlotLineChart\");","map":{"version":3,"names":["React","useEffect","useRef","useMemo","useSVGCanvas","d3","jsxDEV","_jsxDEV","PlotLineChart","props","_s","d3Container","svg","height","width","tTip","chartSelection","undefined","data","categories","dates","map","d","date","counts","console","log","length","className","style","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/kokofan/Documents/project/CS522_analysis/src/lineChart.js"],"sourcesContent":["import React, {useEffect, useRef, useMemo} from 'react';\nimport useSVGCanvas from './useSVGCanvas.js';\nimport * as d3 from 'd3';\n\n\nexport default function PlotLineChart(props){\n    // //this is a generic component for plotting a d3 plot\n    const d3Container = useRef(null);\n    const [svg, height, width, tTip] = useSVGCanvas(d3Container);\n    // console.log(svg, height, width, tTip);\n\n    const chartSelection = useMemo(()=>{\n        if(svg === undefined | props.data === undefined){ return }\n\n        var categories = ['Adult', 'Violence', 'Hate_Speech', 'Discrimination', 'Online_Predators'];\n\n        const dates =  props.data.map(d => d.date);\n\n        const counts = {};\n        for (const d of dates) {\n          counts[d] = counts[d] ? counts[d] + 1 : 1;\n        }\n\n        console.log(counts.length);\n\n        // xScale = d3.scalePoint()\n        //     .domain([0, 100])\n        //     .range([0, (container_width - padding*4)]);\n\n        // var cag_counts = new Array(categories.length).fill(0);\n        // for(let d of props.data){\n        //     var index = categories.indexOf(d.category);\n        //     cag_counts[index] += 1;\n        // }\n\n        // var pieData = [];\n        // var tCount = 0;\n        // for (let i =0; i < categories.length; i++) {\n        //     let entry = {\n        //         'category': categories[i],\n        //         'count': cag_counts[i],\n        //     }\n        //     tCount += cag_counts[i];\n        //     pieData.push(entry);\n        // }\n\n        // console.log(pieData);\n\n        // const radius = width*0.2;\n\n        // var ordScale = d3.scaleOrdinal()\n        //                 .domain(pieData)\n        //                 .range(['#ffd384','#94ebcd','#fbaccc','#d3e0ea','#fa7f72']);\n\n        // let pieChart = svg.append(\"g\")\n        //                     .attr('class','stack')\n        //                     .attr(\"transform\", \"translate(\" + (width/3 + radius) + \", \" + (radius + 20)  + \")\");\n\n        // var pie = d3.pie().value(function(d) { \n        //         return d.count; \n        //     });\n\n        // var arc = pieChart.selectAll(\"arc\")\n        //            .data(pie(pieData))\n        //            .enter();\n\n        // var path = d3.arc()\n        //              .outerRadius(radius)\n        //              .innerRadius(0);\n\n        // arc.append(\"path\")\n        //    .attr(\"d\", path)\n        //    .attr(\"fill\", function(d) { return ordScale(d.data.category); });\n\n        // var label = d3.arc()\n        //               .outerRadius(radius)\n        //               .innerRadius(0);\n\n        // var label2 = d3.arc()\n        //               .outerRadius(radius*2.1)\n        //               .innerRadius(0);\n            \n        // arc.append(\"text\")\n        //    .attr(\"transform\", function(d) { \n        //         // console.log(d);\n        //         var rotation = (d.startAngle/2 + d.endAngle/2) * 180/Math.PI;\n        //         return \"translate(\" + (label2.centroid(d)) + \") rotate(\" + rotation + \")\"; \n        //     })\n        //    .text(function(d) { return d.data.category; })\n        //    .style(\"font-family\", \"arial\")\n        //    .style(\"font-size\", 12)\n        //    .style(\"text-anchor\", \"middle\");\n\n        // arc.append(\"text\")\n        //    .attr(\"transform\", function(d) { \n        //         var rotation = (d.startAngle/2 + d.endAngle/2) * 180/Math.PI;\n        //         return \"translate(\" + (label.centroid(d)) + \") rotate(\" + rotation + \")\"; \n        //     })\n        //    .text(function(d) { return (d.data.count/tCount * 100).toFixed(0) + '%'; })\n        //    .style(\"font-family\", \"arial\")\n        //    .style(\"font-size\", 12)\n        //    .style(\"text-anchor\", \"left\");\n\n    });\n\n    return (\n        <div\n            className={\"d3-component\"}\n            style={{'height':'99%','width':'99%'}}\n            ref={d3Container}\n        ></div>\n    );\n}\n\n\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,MAAM,EAAEC,OAAO,QAAO,OAAO;AACvD,OAAOC,YAAY,MAAM,mBAAmB;AAC5C,OAAO,KAAKC,EAAE,MAAM,IAAI;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAGzB,eAAe,SAASC,aAAaA,CAACC,KAAK,EAAC;EAAAC,EAAA;EACxC;EACA,MAAMC,WAAW,GAAGT,MAAM,CAAC,IAAI,CAAC;EAChC,MAAM,CAACU,GAAG,EAAEC,MAAM,EAAEC,KAAK,EAAEC,IAAI,CAAC,GAAGX,YAAY,CAACO,WAAW,CAAC;EAC5D;;EAEA,MAAMK,cAAc,GAAGb,OAAO,CAAC,MAAI;IAC/B,IAAGS,GAAG,KAAKK,SAAS,GAAGR,KAAK,CAACS,IAAI,KAAKD,SAAS,EAAC;MAAE;IAAO;IAEzD,IAAIE,UAAU,GAAG,CAAC,OAAO,EAAE,UAAU,EAAE,aAAa,EAAE,gBAAgB,EAAE,kBAAkB,CAAC;IAE3F,MAAMC,KAAK,GAAIX,KAAK,CAACS,IAAI,CAACG,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC;IAE1C,MAAMC,MAAM,GAAG,CAAC,CAAC;IACjB,KAAK,MAAMF,CAAC,IAAIF,KAAK,EAAE;MACrBI,MAAM,CAACF,CAAC,CAAC,GAAGE,MAAM,CAACF,CAAC,CAAC,GAAGE,MAAM,CAACF,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;IAC3C;IAEAG,OAAO,CAACC,GAAG,CAACF,MAAM,CAACG,MAAM,CAAC;;IAE1B;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;;IAEA;;IAEA;IACA;IACA;;IAEA;IACA;IACA;;IAEA;IACA;IACA;;IAEA;IACA;IACA;;IAEA;IACA;IACA;;IAEA;IACA;IACA;;IAEA;IACA;IACA;;IAEA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAEJ,CAAC,CAAC;;EAEF,oBACIpB,OAAA;IACIqB,SAAS,EAAE,cAAe;IAC1BC,KAAK,EAAE;MAAC,QAAQ,EAAC,KAAK;MAAC,OAAO,EAAC;IAAK,CAAE;IACtCC,GAAG,EAAEnB;EAAY;IAAAoB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACf,CAAC;AAEf;AAACxB,EAAA,CA3GuBF,aAAa;EAAA,QAGEJ,YAAY;AAAA;AAAA+B,EAAA,GAH3B3B,aAAa;AAAA,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}